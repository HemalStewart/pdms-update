<?phpif (!defined('BASEPATH'))    exit('No direct script access allowed');class Exam_Model extends MY_Model {        function __construct() {        parent::__construct();    }         public function get_exam_list($province_id = null, $district_id = null, $zonal_id = null, $edu_id = null , $school_id = null, $academic_year_id = null){                $this->db->select('E.*, S.school_name, AY.session_year');        $this->db->from('exams AS E');        $this->db->join('academic_years AS AY', 'AY.id = E.academic_year_id', 'left');        $this->db->join('schools AS S', 'S.id = E.school_id', 'left');                                  if($this->session->userdata('role_id') == ADMIN || $this->session->userdata('role_id') == GUARDIAN || $this->session->userdata('role_id') == STUDENT || $this->session->userdata('role_id') == TEACHER || $this->session->userdata('role_id') == ACCOUNTANT || $this->session->userdata('role_id') == LIBRARIN || $this->session->userdata('role_id') == RECEPTIONIST || $this->session->userdata('role_id') == STAFF || $this->session->userdata('role_id') == PROVINCIAL || $this->session->userdata('role_id') == ZONAL){                 //  $school_id = $this->session->userdata('$school_id');           // $this->db->where('S.id', $school_id);           $this->db->where('S.id', $this->session->userdata('school_id'));        }   else{        if ($province_id) {            $this->db->where('S.provincial', $province_id);        }//        if ($district_id) {            $this->db->where('S.district_id', $district_id);        }//        if ($zonal_id) {            $this->db->where('S.zonal_id', $zonal_id);        }//        if ($edu_id) {            $this->db->where('S.educational_id', $edu_id);        }                  if ($school_id) {            $this->db->where('S.id', $school_id);        }        }        //        if($school_id){////            $this->db->where('E.school_id', $school_id);////        }////        ////        if($academic_year_id){        ////            $this->db->where('E.academic_year_id', $academic_year_id);////        }         $this->db->where('S.status', 1);                return $this->db->get()->result();            }         public function get_single_exam($id){                $this->db->select('E.*, AY.session_year');        $this->db->from('exams AS E');        $this->db->join('academic_years AS AY', 'AY.id = E.academic_year_id', 'left');                $this->db->where('E.id', $id);        return $this->db->get()->row();            }         function duplicate_check($school_id, $academic_year_id, $title, $id = null ){                                    if($id){            $this->db->where_not_in('id', $id);        }                $this->db->where('school_id', $school_id);        $this->db->where('title', $title);        $this->db->where('academic_year_id', $academic_year_id);                        return $this->db->get('exams')->num_rows();                }}