<?phpif (!defined('BASEPATH'))    exit('No direct script access allowed');class Employee_Model extends MY_Model {        function __construct() {        parent::__construct();    }        public function get_employee_list($school_id = null){                $this->db->select('E.*, S.school_name, U.username, U.role_id, D.name AS designation, P.provincialname,DI.districtname,Z.zonename,ZB.zoneblock');        $this->db->from('employees AS E');        $this->db->join('users AS U', 'U.id = E.user_id', 'left');        $this->db->join('designations AS D', 'D.id = E.designation_id', 'left');        $this->db->join('schools AS S', 'S.id = E.school_id', 'left');                $this->db->join('provincial AS P', 'S.provincial = P.provincialid', 'left');        $this->db->join('district AS DI', 'S.district_id = DI.id', 'left');        $this->db->join('zone AS Z', 'S.zonal_id = Z.zoneid', 'left');        $this->db->join('zoneblock AS ZB', 'S.educational_id = ZB.zoneblockid', 'left');                if($this->session->userdata('role_id') != SUPER_ADMIN){            $this->db->where('E.school_id', $this->session->userdata('school_id'));        }                if($this->session->userdata('role_id') == SUPER_ADMIN && $school_id){            $this->db->where('E.school_id', $school_id);        }                $this->db->where('S.status', 1);        $this->db->order_by('E.display_order', 'ASC');                return $this->db->get()->result();            }        public function get_single_employee($id){                $this->db->select('E.*, S.school_name, U.username, U.role_id, R.name AS role, D.name AS designation, SG.grade_name, P.provincialname,DI.districtname,Z.zonename,ZB.zoneblock');        $this->db->from('employees AS E');        $this->db->join('users AS U', 'U.id = E.user_id', 'left');        $this->db->join('roles AS R', 'R.id = U.role_id', 'left');        $this->db->join('designations AS D', 'D.id = E.designation_id', 'left');        $this->db->join('schools AS S', 'S.id = E.school_id', 'left');        $this->db->join('salary_grades AS SG', 'SG.id = E.salary_grade_id', 'left');                 $this->db->join('provincial AS P', 'S.provincial = P.provincialid', 'left');        $this->db->join('district AS DI', 'S.district_id = DI.id', 'left');        $this->db->join('zone AS Z', 'S.zonal_id = Z.zoneid', 'left');        $this->db->join('zoneblock AS ZB', 'S.educational_id = ZB.zoneblockid', 'left');        $this->db->where('E.id', $id);        return $this->db->get()->row();            }         function duplicate_check($username, $id = null ){                              if($id){            $this->db->where_not_in('id', $id);        }        $this->db->where('username', $username);        return $this->db->get('users')->num_rows();                }          public function listprovincial() {        $this->db->select()->from('provincial');        $listhostel = $this->db->get();        return $listhostel->result_array();    }                public function geteditSchoolData($id = null) {        if ($id) {//            $sql = "SELECT * FROM jobcardmain WHERE jobid = ?";//            $query = $this->db->query($sql, array($id));//            return $query->row_array();        $this->db->select('schools.id,schools.school_name,schools.school_code,district.districtname,zone.zonename,zoneblock.zoneblock,schools.provincial');        $this->db->from('schools');        $this->db->join('district', 'schools.district_id = district.id', 'left');        $this->db->join('zone', 'schools.zonal_id = zone.zoneid', 'left');        $this->db->join('zoneblock', 'schools.educational_id = zoneblock.zoneblockid', 'left');        $this->db->where('schools.id', $id);        $query = $this->db->get();        return $query->row_array();        }////        $this->db->select('schools.id,schools.school_name,schools.school_code,provincial.provincialname,district.districtname,zone.zonename,zoneblock.zoneblock,schools.provincial,schools.address,schools.phone,schools.email,schools.currency,schools.logo,schools.status,');        $this->db->from('schools');         $this->db->join('provincial', 'schools.provincial = provincial.provincialid', 'left');        $this->db->join('district', 'schools.district_id = district.id', 'left');        $this->db->join('zone', 'schools.zonal_id = zone.zoneid', 'left');        $this->db->join('zoneblock', 'schools.educational_id = zoneblock.zoneblockid', 'left');//        $query = $this->db->get();        return $query->result();    }//Provincial                public function get_employee_provlist($provincial_id = null){                $this->db->select('E.*, S.school_name, U.username, U.role_id, D.name AS designation, P.provincialname,DI.districtname,Z.zonename,ZB.zoneblock');        $this->db->from('employees AS E');        $this->db->join('users AS U', 'U.id = E.user_id', 'left');        $this->db->join('designations AS D', 'D.id = E.designation_id', 'left');        $this->db->join('schools AS S', 'S.id = E.school_id', 'left');                $this->db->join('provincial AS P', 'S.provincial = P.provincialid', 'left');        $this->db->join('district AS DI', 'S.district_id = DI.id', 'left');        $this->db->join('zone AS Z', 'S.zonal_id = Z.zoneid', 'left');        $this->db->join('zoneblock AS ZB', 'S.educational_id = ZB.zoneblockid', 'left');                    $this->db->where('S.provincial', $provincial_id);                $this->db->where('S.status', 1);        $this->db->order_by('E.display_order', 'ASC');                return $this->db->get()->result();            }        //Zonal                public function get_employee_zonallist($zonal_id = null){        $str_area = explode(',', $zonal_id);        $this->db->select('E.*, S.school_name, U.username, U.role_id, D.name AS designation, P.provincialname,DI.districtname,Z.zonename,ZB.zoneblock');        $this->db->from('employees AS E');        $this->db->join('users AS U', 'U.id = E.user_id', 'left');        $this->db->join('designations AS D', 'D.id = E.designation_id', 'left');        $this->db->join('schools AS S', 'S.id = E.school_id', 'left');                $this->db->join('provincial AS P', 'S.provincial = P.provincialid', 'left');        $this->db->join('district AS DI', 'S.district_id = DI.id', 'left');        $this->db->join('zone AS Z', 'S.zonal_id = Z.zoneid', 'left');        $this->db->join('zoneblock AS ZB', 'S.educational_id = ZB.zoneblockid', 'left');                    $this->db->where_in('S.zonal_id', $str_area);                $this->db->where('S.status', 1);        $this->db->order_by('E.display_order', 'ASC');                return $this->db->get()->result();            }}