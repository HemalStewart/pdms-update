<?phpif (!defined('BASEPATH'))    exit('No direct script access allowed');class Material_Model extends MY_Model {        function __construct() {        parent::__construct();    }         public function get_material_list($class_id = null, $school_id = null ){                if(!$class_id){           $class_id = $this->session->userdata('class_id');        }                 $this->db->select('SM.*, SC.school_name, C.School_className AS class_name, S.sub_name AS subject');        $this->db->from('study_materials AS SM');      //  $this->db->join('classes AS C', 'C.id = SM.class_id', 'left');                $this->db->join('schoolclass AS C', 'C.School_classesid = SM.class_id', 'left');        $this->db->join('sub_list AS S', 'S.id = SM.subject_id', 'left');      //  $this->db->join('subjects AS S', 'S.Submainid = SM.subject_id', 'left');        $this->db->join('schools AS SC', 'SC.id = SM.school_id', 'left');                         if ($this->session->userdata('role_id') == ADMIN || $this->session->userdata('role_id') == GUARDIAN || $this->session->userdata('role_id') == STUDENT || $this->session->userdata('role_id') == TEACHER || $this->session->userdata('role_id') == ACCOUNTANT || $this->session->userdata('role_id') == LIBRARIN || $this->session->userdata('role_id') == RECEPTIONIST || $this->session->userdata('role_id') == STAFF) {            $this->db->where('SM.school_id', $this->session->userdata('school_id'));            if ($class_id) {                $this->db->where('SM.class_id', $class_id);            }        } else {////            if ($province_id) {////                $this->db->where('SC.provincial', $province_id);//            }//////            if ($district_id) {////                $this->db->where('SC.district_id', $district_id);//            }//////            if ($zonal_id) {////                $this->db->where('SC.zonal_id', $zonal_id);//            }//////            if ($edu_id) {////                $this->db->where('SC.educational_id', $edu_id);//            }//            if ($school_id) {                  $this->db->where('SM.school_id', $school_id);             }            if ($class_id) {                $this->db->where('SM.class_id', $class_id);            }        }        if ($this->session->userdata('role_id') == SUBJECT) {            $subject_id = $this->session->userdata('subject_id');            $str_area = explode(',', $subject_id);            $this->db->where_in('SM.subject_id', $str_area);        }        if ($this->session->userdata('role_id') == PROVINCIAL) {            $provincial_id = $this->session->userdata('provincial_id');            $this->db->where('SC.provincial', $provincial_id);        }        if ($this->session->userdata('role_id') == ZONAL) {            $zonal_id = $this->session->userdata('zonal_id');            $str_area = explode(',', $zonal_id);            $this->db->where_in('SC.zonal_id', $str_area);        }        if($this->session->userdata('role_id') == TEACHER){            $this->db->where('S.teacher_id', $this->session->userdata('profile_id'));        }        //        if($class_id){////            $this->db->where('SM.class_id', $class_id);////        }        //        if($school_id && $this->session->userdata('role_id') == SUPER_ADMIN){////            $this->db->where('SM.school_id', $school_id); ////        }   ////        ////        if($this->session->userdata('role_id') != SUPER_ADMIN){////            $this->db->where('SM.school_id', $this->session->userdata('school_id'));////        }        $this->db->where('SC.status', 1);        $this->db->order_by('SM.id', 'DESC');        return $this->db->get()->result();            }        public function get_single_material($id){                $this->db->select('SM.*, SC.school_name, C.School_className AS class_name, S.name AS subject');        $this->db->from('study_materials AS SM');     //   $this->db->join('classes AS C', 'C.id = SM.class_id', 'left');         $this->db->join('schoolclass AS C', 'C.School_classesid = SM.class_id', 'left');                $this->db->join('subjects AS S', 'S.id = SM.subject_id', 'left');        $this->db->join('schools AS SC', 'SC.id = SM.school_id', 'left');        $this->db->where('SM.id', $id);        return $this->db->get()->row();            }             public function getclassData($School_TypeId = null) {//        $this->db->select('schoolclass.School_classesid,schoolclass.School_className');        $this->db->from('schoolclass');        $this->db->where('schoolclass.School_Typeid', $School_TypeId);//        $query = $this->db->get();        return $query->result();    }             public function getdistrictData($provincial_id = null) {//        $this->db->select('district.id,district.districtname');        $this->db->from('district');        $this->db->where('district.provinceid', $provincial_id);//        $query = $this->db->get();        return $query->result();    }                public function getzonalData($zonal_id = null) {        $str_area = explode(',', $zonal_id);//        $this->db->select('zoneblock.zoneblockid,zoneblock.zoneblock');        $this->db->from('zoneblock');        $this->db->where_in('zoneblock.zoneid', $str_area);//        $query = $this->db->get();        return $query->result();    }}