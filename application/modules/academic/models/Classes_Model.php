<?phpif (!defined('BASEPATH'))    exit('No direct script access allowed');class Classes_Model extends MY_Model {    function __construct() {        parent::__construct();    }    public function get_class_list($province_id = null, $district_id = null, $zonal_id = null, $edu_id = null, $schools_id = null) {       /* $this->db->select('C.*, S.school_name, T.name AS teacher,SC.School_className as classname');        $this->db->from('subjects AS C');        $this->db->join('teachers AS T', 'T.id = C.teacher_id', 'left');        $this->db->join('schools AS S', 'S.id = C.school_id', 'left');              $this->db->join('schoolclass AS SC', 'SC.School_classesid = C.class_id', 'left');*/                $this->db->select('C.*, S.school_name, T.name AS teacher,C.name AS classname');        $this->db->from('classes AS C');        $this->db->join('teachers AS T', 'T.id = C.teacher_id', 'left');        $this->db->join('schools AS S', 'S.id = C.school_id', 'left');       // $this->db->join('subjects AS SUB', 'SUB.teacher_id = T.id');                if ($this->session->userdata('role_id') == ADMIN || $this->session->userdata('role_id') == GUARDIAN || $this->session->userdata('role_id') == STUDENT || $this->session->userdata('role_id') == TEACHER || $this->session->userdata('role_id') == ACCOUNTANT || $this->session->userdata('role_id') == LIBRARIN || $this->session->userdata('role_id') == RECEPTIONIST || $this->session->userdata('role_id') == STAFF) {            $this->db->where('S.id', $this->session->userdata('school_id'));        }         else {            if ($province_id) {                $this->db->where('S.provincial', $province_id);            }//            if ($district_id) {                $this->db->where('S.district_id', $district_id);            }//            if ($zonal_id) {                $this->db->where('S.zonal_id', $zonal_id);            }//            if ($edu_id) {                $this->db->where('S.educational_id', $edu_id);            }            if ($schools_id) {                $this->db->where('S.id', $schools_id);            }        }        //            if($this->session->userdata('role_id') == SUBJECT){////            $school_id = $this->session->userdata('school_id');//             $str_area = explode(',', 	$school_id);//            //            $this->db->where_in('SUB.Submainid', $str_area);////        }                  if($this->session->userdata('role_id') == PROVINCIAL){           $provincial_id = $this->session->userdata('provincial_id');                                    $this->db->where('S.provincial', $provincial_id);        }                  if($this->session->userdata('role_id') == ZONAL){             $zonal_id = $this->session->userdata('zonal_id');             $str_area = explode(',', $zonal_id);                        $this->db->where_in('S.zonal_id', $str_area);        }                            //        if ($this->session->userdata('role_id') == SUPER_ADMIN && $school_id) {////            $this->db->where('C.school_id', $school_id);//        }        $this->db->where('S.status', 1);        return $this->db->get()->result();    }    function duplicate_check($school_id, $name, $id = null) {        if ($id) {            $this->db->where_not_in('id', $id);        }        $this->db->where('name', $name);        $this->db->where('school_id', $school_id);        return $this->db->get('classes')->num_rows();    }    function listclassid($School_TypeId) {        $this->db->select('C.*');        $this->db->from('schoolclass AS C');        $this->db->where('C.School_Typeid', $School_TypeId);        return $this->db->get()->result_array();    }    public function get_school_list($edu_id = null) {        $this->db->select('D.*');        $this->db->from('schools AS D');        $this->db->where('D.educational_id', $edu_id);        $this->db->order_by('D.id');        $query = $this->db->get();        return $query->result_array();        // return $section;    }  public function getdistrictData($provincial_id = null) {//        $this->db->select('district.id,district.districtname');        $this->db->from('district');        $this->db->where('district.provinceid', $provincial_id);//        $query = $this->db->get();        return $query->result();    }                public function getzonalData($zonal_id = null) {        $str_area = explode(',', $zonal_id);//        $this->db->select('zoneblock.zoneblockid,zoneblock.zoneblock');        $this->db->from('zoneblock');        $this->db->where_in('zoneblock.zoneid', $str_area);//        $query = $this->db->get();        return $query->result();    }    }